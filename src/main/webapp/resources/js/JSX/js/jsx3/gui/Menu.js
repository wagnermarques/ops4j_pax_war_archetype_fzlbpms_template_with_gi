/*
 * Copyright (c) 2001-2011, TIBCO Software Inc.
 * Use, modification, and distribution subject to terms of license.
 */
jsx3.require("jsx3.xml.Cacheable","jsx3.gui.Form","jsx3.gui.Heavyweight","jsx3.gui.Block","jsx3.gui.ToolbarButton","jsx3.util.MessageFormat");jsx3.Class.defineClass("jsx3.gui.Menu",jsx3.gui.Block,[jsx3.xml.Cacheable,jsx3.xml.CDF,jsx3.gui.Form],function(o,r){var
ub={A:"']",Aa:"|",B:"id",Ba:"//record[@jsxkeycode]",C:"selected",Ca:"keycode",D:"jsxselected",Da:"record",E:"jsxindex",Ea:"mouseout",F:"url(",Fa:"blur",G:")",Ga:"Uc",H:"jsxid",Ha:"focus",I:"jsxtype",Ia:"Ri",J:"Book",Ja:"1 4 1 0",K:"focusPrevious",Ka:"span",L:"focusNext",La:"relativebox",M:"none",Ma:"box",N:"jsxspy",Na:"0 0 0 4",O:"jsxhide",Oa:"0px;0px;0px;solid 1px ",P:"jsxmenu",Pa:"5 4 5 0",Q:"Menu.showTopMenu",Qa:");",R:"jsx30menu_",Ra:"id='",S:"_list",Sa:"' ",T:'<div tabindex="0" jsxindex="',Ta:" class='jsx30toolbarbutton'",U:'"',Ua:"class='jsx30toolbarbutton_img'",V:"mouseover",Va:"class='jsx30toolbarbutton_lbl'",W:"j8",Wa:"&#160;",X:"keydown",Xa:"class='jsx30toolbarbutton_mnu'",Y:"gu",Ya:"overflow:hidden;",Z:"click",Za:"background-color:",_:"hO",_a:";",a:"background-image:url(",aa:"mousedown",ab:"class='jsx30toolbarbutton_cap'",b:"jsx:///images/menu/bg.gif",ba:"UC",bb:"execute",c:");background-repeat:repeat-y;",ca:"mouseup",cb:"jsxexecute",d:"#ffffff",da:"cw",db:"#808080",e:"jsx:///xsl/jsxmenu.xsl",ea:' class="',eb:"3.0.00",f:"<?xml version=\"1.0\" encoding=\"UTF-8\"?><xsl:stylesheet xmlns:msxsl=\"urn:schemas-microsoft-com:xslt\" xmlns:xsl=\"http://www.w3.org/1999/XSL/Transform\" version=\"1.0\"><xsl:output method=\"xml\" omit-xml-declaration=\"yes\"/><xsl:param name=\"attrchildren\">record</xsl:param><xsl:param name=\"attrid\">jsxid</xsl:param><xsl:param name=\"attrtext\">jsxtext</xsl:param><xsl:param name=\"attrtip\">jsxtip</xsl:param><xsl:param name=\"attrstyle\">jsxstyle</xsl:param><xsl:param name=\"attrclass\">jsxclass</xsl:param><xsl:param name=\"attrimg\">jsximg</xsl:param><xsl:param name=\"attrimgalt\">jsximgalt</xsl:param><xsl:param name=\"attrselected\">jsxselected</xsl:param><xsl:param name=\"attrdisabled\">jsxdisabled</xsl:param><xsl:param name=\"attrdivider\">jsxdivider</xsl:param><xsl:param name=\"attrkeycode\">jsxkeycode</xsl:param><xsl:param name=\"attrlazy\">jsxlazy</xsl:param><xsl:param name=\"jsxtabindex\">0</xsl:param><xsl:param name=\"jsxleftbuffer\">36</xsl:param><xsl:param name=\"jsxselectedimage\"/><xsl:param name=\"jsxselectedimagealt\"/><xsl:param name=\"jsxtransparentimage\"/><xsl:param name=\"jsxsubmenuimage\"/><xsl:param name=\"jsxdragtype\">JSX_GENERIC</xsl:param><xsl:param name=\"jsxrootid\">jsxroot</xsl:param><xsl:param name=\"jsxid\">jsxroot</xsl:param><xsl:param name=\"jsxsortpath\"/><xsl:param name=\"jsxsortdirection\">ascending</xsl:param><xsl:param name=\"jsxsorttype\">text</xsl:param><xsl:param name=\"jsxpath\"/><xsl:param name=\"jsxpathapps\"/><xsl:param name=\"jsxpathprefix\"/><xsl:param name=\"jsxappprefix\"/><xsl:param name=\"jsxdisableescape\">no</xsl:param><xsl:param name=\"jsxmode\">0</xsl:param><xsl:param name=\"jsxkeycodes\"/><xsl:param name=\"jsx_img_resolve\">1</xsl:param><xsl:param name=\"jsxtitle\"/><xsl:param name=\"jsxasyncmessage\"/><xsl:template match=\"/\"><JSX_FF_WELLFORMED_WRAPPER><xsl:choose><xsl:when test=\"$jsxasyncmessage and $jsxasyncmessage!=''\"><xsl:value-of select=\"$jsxasyncmessage\"/></xsl:when><xsl:otherwise><xsl:apply-templates select=\"//*[@*[name() = $attrid]=$jsxrootid]\"/></xsl:otherwise></xsl:choose></JSX_FF_WELLFORMED_WRAPPER></xsl:template><xsl:template match=\"*\"><xsl:param name=\"mystyle\" select=\"@*[name() = $attrstyle]\"/><xsl:param name=\"myclass\" select=\"@*[name() = $attrclass]\"/><xsl:variable name=\"jsxleftbuffer_sel\"><xsl:text>left:</xsl:text><xsl:choose><xsl:when test=\"$jsxleftbuffer &gt; 12\"><xsl:value-of select=\"$jsxleftbuffer - 11\"/></xsl:when><xsl:otherwise><xsl:text>-9</xsl:text></xsl:otherwise></xsl:choose><xsl:text>px</xsl:text></xsl:variable><xsl:variable name=\"jsxleftbuffer_txt\"><xsl:text>padding-left:</xsl:text><xsl:value-of select=\"$jsxleftbuffer\"/><xsl:text>px</xsl:text></xsl:variable><xsl:for-each select=\"*[$attrchildren='*' or name()=$attrchildren]\"><xsl:sort data-type=\"{$jsxsorttype}\" order=\"{$jsxsortdirection}\" select=\"@*[name()=$jsxsortpath]\"/><xsl:choose><xsl:when test=\"@*[name() = $attrdivider][.='1']\"><div class=\"jsx30menu_{$jsxmode}_div\" jsxdisabled=\"1\" jsxtype=\"Divider\"><div>&#160;</div></div></xsl:when></xsl:choose><div id=\"{$jsxid}_{@*[name() = $attrid]}\" jsxid=\"{@*[name() = $attrid]}\" tabindex=\"{$jsxtabindex}\"><xsl:choose><xsl:when test=\"@*[name() = $attrdisabled]='1' or (*[$attrchildren='*' or name()=$attrchildren] and not(*[$attrchildren='*' or name()=$attrchildren][not(@*[name() = $attrdisabled]='1')]))\"><xsl:attribute name=\"class\">jsx30menu_<xsl:value-of select=\"$jsxmode\"/>_itemdis</xsl:attribute></xsl:when><xsl:otherwise><xsl:attribute name=\"class\">jsx30menu_<xsl:value-of select=\"$jsxmode\"/>_item</xsl:attribute></xsl:otherwise></xsl:choose><xsl:choose><xsl:when test=\"@*[name() = $attrtip]\"><xsl:attribute name=\"title\"><xsl:value-of select=\"@*[name() = $attrtip]\"/></xsl:attribute></xsl:when></xsl:choose><xsl:if test=\"@*[name() = $attrdisabled]='1'\"><xsl:attribute name=\"jsxdisabled\">1</xsl:attribute></xsl:if><xsl:attribute name=\"jsxtype\"><xsl:choose><xsl:when test=\"*[$attrchildren='*' or name()=$attrchildren] or (@*[name() = $attrlazy] &gt; 0)\">Book</xsl:when><xsl:otherwise>Leaf</xsl:otherwise></xsl:choose></xsl:attribute><xsl:choose><xsl:when test=\"@*[name() = $attrimg]\"><xsl:variable name=\"src1\"><xsl:choose><xsl:when test=\"$jsx_img_resolve='1'\"><xsl:apply-templates mode=\"uri-resolver\" select=\"@*[name() = $attrimg]\"/></xsl:when><xsl:otherwise><xsl:value-of select=\"@*[name() = $attrimg]\"/></xsl:otherwise></xsl:choose></xsl:variable><img alt=\"{@*[name() = $attrimgalt]}\" src=\"{$src1}\" style=\"position:absolute;left:2px;top:2px;width:16px;height:16px;\"/></xsl:when></xsl:choose><xsl:choose><xsl:when test=\"@*[name() = $attrselected] = 1\"><img alt=\"{$jsxselectedimagealt}\" class=\"jsx30menu_{$jsxmode}_sel\" src=\"{$jsxselectedimage}\" style=\"{$jsxleftbuffer_sel}\"/></xsl:when></xsl:choose><xsl:choose><xsl:when test=\"*[$attrchildren='*' or name()=$attrchildren] or (@*[name() = $attrlazy] &gt; 0)\"><div class=\"jsx30menu_{$jsxmode}_kc {$myclass}\" style=\"{$mystyle};{$jsxleftbuffer_txt}\"><table class=\"jsx30menu_{$jsxmode}_kct\"><tr><td class=\"name\"><xsl:apply-templates mode=\"jsxtext\" select=\".\"/></td><td class=\"keycode\" style=\"background-image:url({$jsxsubmenuimage});background-position:right 2px;background-repeat:no-repeat;\">&#160;</td></tr></table></div></xsl:when><xsl:otherwise><div class=\"jsx30menu_{$jsxmode}_kc {$myclass}\" style=\"{$mystyle};{$jsxleftbuffer_txt}\"><table class=\"jsx30menu_{$jsxmode}_kct\"><tr><td class=\"name\"><xsl:apply-templates mode=\"jsxtext\" select=\".\"/></td><xsl:if test=\"@*[name() = $attrkeycode]\"><td class=\"keycode\"><xsl:apply-templates mode=\"keycode\" select=\".\"/></td></xsl:if></tr></table></div></xsl:otherwise></xsl:choose></div></xsl:for-each></xsl:template><xsl:template match=\"*\" mode=\"keycode\"><xsl:variable name=\"after\" select=\"substring-after($jsxkeycodes, concat(@*[name() = $attrid],':'))\"/><xsl:choose><xsl:when test=\"$after\"><xsl:value-of select=\"substring-before($after, '|')\"/></xsl:when><xsl:otherwise><xsl:value-of select=\"@*[name() = $attrkeycode]\"/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match=\"*\" mode=\"jsxtext\"><xsl:choose><xsl:when test=\"$jsxdisableescape='yes'\"><xsl:apply-templates mode=\"disable-output-escp\" select=\"@*[name() = $attrtext]\"/></xsl:when><xsl:otherwise><xsl:value-of select=\"@*[name() = $attrtext]\"/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match=\"* | @*\" mode=\"uri-resolver\"><xsl:param name=\"uri\" select=\".\"/><xsl:choose><xsl:when test=\"starts-with($uri,'JSX/')\"><xsl:value-of select=\"concat($jsxpath, $uri)\"/></xsl:when><xsl:when test=\"starts-with($uri,'JSXAPPS/')\"><xsl:value-of select=\"concat($jsxpathapps, $uri)\"/></xsl:when><xsl:when test=\"starts-with($uri,'GI_Builder/')\"><xsl:value-of select=\"concat($jsxpath, $uri)\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsx:///')\"><xsl:value-of select=\"concat($jsxpath, 'JSX/', substring($uri,8))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsx:/')\"><xsl:value-of select=\"concat($jsxpath, 'JSX/', substring($uri,6))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxapp:///')\"><xsl:value-of select=\"concat($jsxappprefix, substring($uri,11))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxapp://')\"><xsl:value-of select=\"concat($jsxpathapps, substring($uri,10))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxapp:/')\"><xsl:value-of select=\"concat($jsxappprefix, substring($uri,9))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxuser:///')\"><xsl:value-of select=\"concat($jsxpathapps, substring($uri,11))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxuser:/')\"><xsl:value-of select=\"concat($jsxpathapps, substring($uri,9))\"/></xsl:when><xsl:when test=\"starts-with($uri,'jsxaddin://')\"><xsl:value-of select=\"$uri\"/></xsl:when><xsl:when test=\"starts-with($uri,'/')\"><xsl:value-of select=\"$uri\"/></xsl:when><xsl:when test=\"contains($uri,'://')\"><xsl:value-of select=\"$uri\"/></xsl:when><xsl:when test=\"not($jsxpathprefix='') and not(starts-with($uri, $jsxpathprefix))\"><xsl:apply-templates mode=\"uri-resolver\" select=\".\"><xsl:with-param name=\"uri\" select=\"concat($jsxpathprefix, $uri)\"/></xsl:apply-templates></xsl:when><xsl:otherwise><xsl:value-of select=\"$uri\"/></xsl:otherwise></xsl:choose></xsl:template><xsl:template match=\"* | @*\" mode=\"disable-output-escp\"><xsl:call-template name=\"disable-output-escp\"><xsl:with-param name=\"value\" select=\".\"/></xsl:call-template></xsl:template><xsl:template name=\"disable-output-escp\"><xsl:param name=\"value\" select=\".\"/><xsl:choose><xsl:when test=\"function-available('msxsl:node-set')\"><xsl:value-of disable-output-escaping=\"yes\" select=\"$value\"/></xsl:when><xsl:otherwise><span class=\"disable-output-escp\"><xsl:value-of select=\"$value\"/></span></xsl:otherwise></xsl:choose></xsl:template></xsl:stylesheet>",fa:'" style="',fb:"td",g:"JSX_MENU_XSL",ga:'">',gb:"jsx3.gui.Matrix",h:"<div tabIndex='0' class='jsx30menu_0_list' onmousedown='var e = jsx3.gui.Event.wrap(event); jsx3.gui.Event.publish(e); e.cancelBubble(); e.cancelReturn();'>- no data -</div>",ha:"</div>",hb:"pt",i:'<div tabIndex="0" class="jsx30menu_{0}_item" onmousedown="var e = jsx3.gui.Event.wrap(event); jsx3.gui.Event.publish(e); e.cancelBubble(); e.cancelReturn();"><div class="jsx30menu_{0}_kc"><table class="jsx30menu_{0}_kct"><tr><td class="name">{1}</td><td class="keycode"></td></tr></table></div></div>',ia:"jsx30shadow",ib:"border",j:"jsx:///images/menu/submenuarrow.gif",ja:"E",jb:"padding",k:"jsx:///images/menu/selectover.gif",ka:"W",l:"jsx:///images/menu/selected.gif",la:"N",m:"jsx:///images/menu/down_menu.gif",ma:"S",n:"jsx:///images/menu/off_menu.gif",na:"Y",o:"jsx:///images/menu/on_menu.gif",oa:"div",p:"jsx:///images/menu/over_menu.gif",pa:"px",q:"jsx:///images/tbb/down.gif",qa:"Divider",r:"jsx:///images/tbb/on.gif",ra:"key",s:"#9B9BB7",sa:"Ru",t:"jsx30curvisiblemenu_",ta:"x",u:"",ua:"sel",v:"jsxdisabled",va:"JSX_GENERIC",w:"1",wa:"jsxabspath",x:"disabled",xa:"jsxhomepath",y:"groupname",ya:"noData",z:"//record[@jsxgroupname='",za:":"};var
fb=jsx3.util.Logger.getLogger(o.jsxclass.getName());var
C=jsx3.gui.Event;var
wb=jsx3.gui.Interactive;var
Ya=jsx3.html;o.DEFAULTBACKGROUND=ub.a+jsx3.resolveURI(ub.b)+ub.c;o.DEFAULTBACKGROUNDCOLOR=ub.d;o.DEFAULTXSLURL=jsx3.resolveURI(ub.e);o.Ip=(new
jsx3.xml.XslDocument()).loadXML(ub.f);o.DEFAULTXSLCACHEID=ub.g;o.DEFAULTCONTEXTLEFTOFFSET=10;o.NODATAMESSAGE=ub.h;o.yu=new
jsx3.util.MessageFormat(ub.i);o.zq=0;o.Ms=1;o.bz=12;o.H4=jsx3.resolveURI(ub.j);o.e1=jsx3.resolveURI(ub.k);o.L4=jsx3.resolveURI(ub.l);o.Sz=jsx3.resolveURI(ub.m);o.ZI=jsx3.resolveURI(ub.n);o.Iv=jsx3.resolveURI(ub.o);o.WF=jsx3.resolveURI(ub.p);o.CZ=jsx3.resolveURI(ub.q);o.SD=jsx3.resolveURI(ub.r);if(jsx3.CLASS_LOADER.IE6)Ya.loadImages(ub.b,o.Sz,o.ZI,o.Iv,o.WF,o.L4,o.e1,o.H4,o.CZ,o.SD);o.F9=ub.s;o.A1=null;o.L9=[];o.DU=[];o.ZA=null;o.p0=null;o.mA=null;o.ME=250;o.xq=150;o.Wp=ub.t;o.mT=1000;r.init=function(n,i){this.jsxsuper(n);if(i!=null)this.setText(i);};r.getImage=function(){return this.jsximage!=null&&jsx3.util.strTrim(this.jsximage)!=ub.u?this.jsximage:null;};r.setImage=function(j){this.jsximage=j;return this;};r.getXSL=function(){return this.nd(o.DEFAULTXSLURL,o.Ip);};r.disableItem=function(j){return this.enableItem(j,false);};r.enableItem=function(h,a){if(a||a==null)this.deleteRecordProperty(h,ub.v,false);else this.insertRecordProperty(h,ub.v,ub.w,false);return this;};r.isItemEnabled=function(j){var
Fb=this.getRecordNode(j);return Fb&&this.Sf(Fb,ub.x)!=ub.w;};r.selectItem=function(i,c){if(c||c==null){var
za=this.getRecordNode(i);if(za!=null){var
ma=this.Sf(za,ub.y);if(ma)for(var
Ib=(this.getXML()).selectNodeIterator(ub.z+ma+ub.A);Ib.hasNext();){var
L=Ib.next();if(this.Sf(L,ub.B)!=i)this.Sf(L,ub.C,null);}}this.insertRecordProperty(i,ub.D,1,false);}else this.deleteRecordProperty(i,ub.D,false);return this;};r.deselectItem=function(l){return this.selectItem(l,false);};r.isItemSelected=function(f){var
gb=this.getRecordNode(f);return gb!=null&&this.Sf(gb,ub.C)==ub.w;};r.h6=function(a,c,g){if(g==null)g=parseInt(c.parentNode.parentNode.getAttribute(ub.E));var
J=o.DU[g];if(J&&J!=c){try{J.style.backgroundImage=ub.F+jsx3.gui.Block.SPACE+ub.G;}catch(Kb){}o.DU[g]=null;}var
R=false;if(c.getAttribute(ub.v)!=ub.w){var
B=c.getAttribute(ub.H);R=this.KS(B);c.style.backgroundImage=ub.F+o.e1+ub.G;o.DU[g]=c;Ya.focus(c);var
Ia=o.L9[g-1];if(Ia)Ia.scrollTo(c);}else Ya.focus(c.parentNode.parentNode);this.xQ(R?g+1:g);};r.xQ=function(q,a){if(o.L9.length>q&&(o.mM==null||o.mM>q)){if(o.mA)window.clearTimeout(o.mA);this.HR(q,null);o.mM=q;var
A=this;o.mA=window.setTimeout(function(){if(A.getParent()==null)return;o.mA=null;o.mM=null;A.ED(q+1,true);},a?0:o.xq);}};r.KS=function(m){if(this._jsxP4)return jsx3.util.arrIndexOf(this._jsxP4,m)>=0;return false;};r.HR=function(q,g){if(q<1)return;if(this._jsxP4==null)this._jsxP4=[];if(g==null){this._jsxP4.splice(q-1,this._jsxP4.length);}else this._jsxP4.splice(q-1,this._jsxP4.length,g);};r._ebKeyDown=function(j,c){if(this.jsxsupermix(j,c))return;var
yb=j.keyCode();if((yb==40||yb==13||yb==32)&&!j.hasModifier()){this.showMenu(j,c,1);j.cancelAll();}else if(yb==39){this.YW(true);}else if(yb==37)this.YW(false);};r.Fo=function(d,i){if(!d.leftButton())return;this.aG(d,i);i.childNodes[2].style.backgroundImage=ub.F+o.Sz+ub.G;if(this.getState()==o.Ms){if(!this._jsxX1)this.ED();}else this.showMenu(d,i,1);};r.Ri=function(h,e){if(h.isFakeOver(e))return;if(o.p0)window.clearTimeout(o.p0);this.ju(h,e);if(this.getState()==o.zq)e.childNodes[2].style.backgroundImage=ub.F+o.WF+ub.G;if(o.A1!=null&&this!=o.A1&&o.A1.getParent()==this.getParent()||jsx3.EventHelp.FLAG==1&&this.getCanDrop()==1)this.showMenu(h,e,1);};r.Uc=function(q,m){if(q.isFakeOut(m))return;if(o.p0)window.clearTimeout(o.p0);if(this.getState()==o.zq||m!=this._jsxB9[0]){this.YA(q,m);m.childNodes[2].style.backgroundImage=ub.F+o.ZI+ub.G;}};r.gu=function(e,h){if(e.hasModifier(true))return;var
_=o.rH(e,h);var
N=parseInt(h.getAttribute(ub.E));var
Cb=_?_.getAttribute(ub.H):null;var
Ua=_&&_.getAttribute(ub.v)==ub.w;var
Ja=e.keyCode();if((Ja==32||Ja==13)&&!Ua){this.e0(e,Cb);this.ED();}else if(Ja==39){if(_&&_.getAttribute(ub.I)==ub.J&&!Ua){this.showMenu(e,_,N+1,Cb);}else this.YW(true);}else if(Ja==37){if(N>1)this.ED(N);else this.YW(false);}else if(Ja==27){this.ED();}else if(Ja==40){if(!_)_=h.lastChild;for(var
U=_;true;){if(U==U.parentNode.lastChild){U=U.parentNode.firstChild;}else U=U.nextSibling;if(U==_)break;if(U.getAttribute(ub.v)!=ub.w){this.h6(e,U,N);break;}}}else if(Ja==38){if(!_)_=h.firstChild;for(var
U=_;true;){if(U==U.parentNode.firstChild){U=U.parentNode.lastChild;}else U=U.previousSibling;if(U==_)break;if(U.getAttribute(ub.v)!=ub.w){this.h6(e,U,N);break;}}}else if(Ja==9){Ya[e.shiftKey()?ub.K:ub.L](this.getRendered(e),e);return;}else return;e.cancelAll();};r.YW=function(p){var
w=(this.getParent()).getChildren();var
V=this.getChildIndex();var
Va=p?1:-1;for(var
Aa=V;true;){Aa=jsx3.util.numMod(Aa+Va,w.length);if(Aa==V)break;var
tb=w[Aa];if(tb instanceof o&&tb.getDisplay()!=ub.M){try{tb.focus();}catch(Kb){}break;}}};r.UC=function(q,c){if(!q.leftButton()){q.cancelBubble();return;}var
Q=parseInt(c.getAttribute(ub.E));var
t=o.rH(q,c);if(t&&t.getAttribute(ub.I)==ub.J)this.showMenu(q,t,Q+1,t.getAttribute(ub.H));q.cancelBubble();};r.cw=function(k,b){if(!k.leftButton())k.cancelBubble();};r.j8=function(p,n){var
Hb=o.rH(p,n);if(Hb&&p.isFakeOver(Hb))return;if(o.p0)window.clearTimeout(o.p0);o.PY();var
D=parseInt(n.getAttribute(ub.E));if(Hb){var
Pa=Hb.getAttribute(ub.I);var
lb=Hb.getAttribute(ub.v)==ub.w;var
aa=Hb.getAttribute(ub.H);this.h6(p,Hb,D);if(Pa==ub.J)if(!this.KS(aa)){var
na=this;p.yh();o.p0=window.setTimeout(function(){if(na.getParent()==null)return;o.p0=null;na.showMenu(p,Hb,D+1,aa);},o.ME);}if(aa!=null)this.C1(p,aa,Pa==ub.J);}};r.C1=function(b,e,i){if(this.hasEvent(ub.N)){b.yh();var
Ua=this;o.fP=window.setTimeout(function(){if(Ua.getParent()==null)return;o.fP=null;var
Ka=Ua.doEvent(ub.N,{objEVENT:b,strRECORDID:e});if(Ka){jsx3.gui.Interactive.hideSpy();Ua.showSpy(Ka,b);}},i?o.mT:jsx3.EventHelp.mT);}};o.PY=function(){if(o.fP){window.clearTimeout(o.fP);o.fP=null;}jsx3.gui.Interactive.hideSpy();};o.rH=function(m,s){var
P=m.srcElement();while(P!=null&&P.getAttribute(ub.I)==null){P=P.parentNode;if(P==s||P==s.ownerDocument)P=null;}return P;};r.hO=function(k,b){if(!k.leftButton()){k.cancelBubble();return;}var
ib=o.rH(k,b);if(ib){var
Jb=ib.getAttribute(ub.I);var
w=ib.getAttribute(ub.v);if(Jb!=ub.J&&!w){this.e0(k,ib.getAttribute(ub.H));this.ED();}}};r.Ru=function(m){this.ED(1,true);};r.ED=function(s,f){if(this!=o.A1)return;if(s==null)s=1;if(s==1)C.unsubscribeLoseFocus(this,this);if(o.mA)window.clearTimeout(o.mA);o.PY();this.HR(s-1,null);for(var
ya=o.L9.length-1;ya>=s-1;ya--){var
Ca=o.L9[ya];if(Ca)Ca.destroy();}o.L9.splice(s-1,o.L9.length);o.DU.splice(s,o.DU.length);if(s==1){this.EK(o.zq);this.doEvent(ub.O);o.A1=null;o.TI=false;}if(!f)try{if(this._jsxB9[s-1])this._jsxB9[s-1].focus();else if(s==1)this.focus();}catch(Kb){}this._jsxB9.splice(s-1,this._jsxB9.length);};r.showContextMenu=function(h,m,c,q){o.TI=true;this._jsxZ3=m;this._jsxiO=c;this.showMenu(h,null,1,null,q);};r.getContextParent=function(){return this._jsxZ3;};r.getContextRecordId=function(){return this._jsxiO;};r.showMenu=function(q,a,f,c,e){var
Qa=this.doEvent(ub.P,{objEVENT:q,objANCHOR:a,intINDEX:f,strPARENTID:c,_gipp:1});if(Qa===false)return;if(a==null&&c!=null)a=this.getRendered(q);if(f==1){if(o.A1)o.A1.ED(1,true);o.A1=this;this._jsxX1=true;}q.yh();jsx3.sleep(function(){this.h8(q,a,f,c,e);},ub.Q,this,true);if(this._jsxB9==null)this._jsxB9=[];};r.h8=function(d,l,n,j,m){if(n>1&&!o.L9[n-2])return;this._jsxB9[n-1]=l;this.HR(n,j);var
Oa=o.Wp+n;var
Ab=this.aY(j,n);var
ob=ub.R+o.n8()+ub.S;var
Xa=ub.T+n+ub.U+this.Fg(ub.V,ub.W)+this.Fg(ub.X,ub.Y)+this.Fg(ub.Z,ub._)+this.Fg(ub.aa,ub.ba)+this.Fg(ub.ca,ub.da)+ub.ea+ob+ub.fa+this.ch()+this.ke()+ub.ga+Ab+ub.ha;var
ra=o.L9[n-1];if(ra)ra.destroy();var
Ta=o.L9[n-1]=new
jsx3.gui.Heavyweight(Oa,this);Ta.setHTML(Xa);Ta.setScrolling(true);Ta.setClassName(ub.ia);if(l&&j!=null){Ta.addXRule(l,ub.ja,ub.ka,-4);Ta.addXRule(l,ub.ka,ub.ja,8);Ta.addYRule(l,ub.la,ub.la,0);Ta.addYRule(l,ub.la,ub.ma,24);Ta.addRule(null,ub.la,0,ub.na);}else if(l){Ta.addXRule(l,ub.ka,ub.ka,0);Ta.addXRule(l,ub.ja,ub.ja,0);Ta.addYRule(l,ub.ma,ub.la,0);Ta.addYRule(l,ub.la,ub.ma,0);}else{Ta.addXRule(m?m.L:d,null,ub.ka,o.DEFAULTCONTEXTLEFTOFFSET);Ta.addXRule(m?m.L:d,null,ub.ja,-o.DEFAULTCONTEXTLEFTOFFSET);Ta.addYRule(m?m.T:d,null,ub.la,o.bz);Ta.addYRule(m?m.T:d,null,ub.ma,-o.bz);Ta.addRule(null,ub.la,0,ub.na);}if(n==1&&!o.TI)this.EK(o.Ms,l);Ta.show();var
pa=Ta.getRendered(l);var
Za=pa.childNodes[0].childNodes[0];if(jsx3.CLASS_LOADER.IE){var
x=Math.max(Za.offsetWidth-2,Za.clientWidth);for(var
Jb=0;Jb<Za.childNodes.length;Jb++){var
sa=Za.childNodes[Jb];if(sa.nodeName&&sa.nodeName.toLowerCase()==ub.oa)if(sa.getAttribute(ub.H))Za.childNodes[Jb].style.width=x+ub.pa;else if(sa.getAttribute(ub.I)==ub.qa&&sa.offsetWidth<30)Za.childNodes[Jb].style.width=Math.max(0,x-(sa.offsetWidth-1))+ub.pa;}}if(n>1&&(d.getType()).indexOf(ub.ra)==0){this.h6(d,Za.childNodes[0],n);}else Ya.focus(Za);if(n==1){C.subscribeLoseFocus(this,this,ub.sa);jsx3.sleep(function(){this._jsxX1=false;},null,this);}};r.repaint=function(){this.ED();return this.jsxsuper();};o.n8=function(){var
Ma=Ya.getMode();if(Ma==2&&jsx3.CLASS_LOADER.getVersion()>=7)Ma=Ma+ub.ta;return Ma;};r.aY=function(m,e){var
ra={jsxtabindex:this.getIndex()?this.getIndex():0,jsxselectedimage:o.L4,jsxselectedimagealt:this.Nk(ub.ua,o),jsxtransparentimage:jsx3.gui.Block.SPACE,jsxdragtype:ub.va,jsxid:this.getId(),jsxsubmenuimage:o.H4,jsxmode:o.n8(),jsxpath:jsx3.getEnv(ub.wa),jsxpathapps:jsx3.getEnv(ub.xa),jsxpathprefix:(this.getUriResolver()).getUriPrefix(),jsxappprefix:(this.getServer()).getUriPrefix(),jsxkeycodes:this.oA(m)};if(m!=null)ra.jsxrootid=m;var
ea=this.getXSLParams();for(var Ba in ea)ra[Ba]=ea[Ba];var
Sa=this.doTransform(ra);if(!jsx3.xml.Template.supports(1))Sa=Ya.removeOutputEscapingSpan(Sa);Sa=this.vo(Sa);if(jsx3.util.strTrim(Sa)==ub.u)Sa=o.yu.format((o.n8()).toString(),this.Nk(ub.ya,o));return Sa;};r.oA=function(m){if(this._jsxVY==null)return ub.u;var
M=[];for(var ga in this._jsxVY)M[M.length]=ga+ub.za+this._jsxVY[ga].getFormatted();M[M.length]=ub.u;return M.join(ub.Aa);};r.clearCachedContent=function(){};r.getState=function(){return this._jsxBA!=null?this._jsxBA:o.zq;};r.EK=function(a,b){if(b==null)b=this.getRendered(b);if(b!=null)if(a==o.Ms){if(o.ZA==this)return this;if(o.ZA!=null)o.ZA.EK(o.zq);b.style.backgroundImage=ub.F+o.SD+ub.G;b.childNodes[3].style.backgroundColor=o.F9;b.childNodes[2].style.backgroundImage=ub.F+o.Iv+ub.G;o.ZA=this;}else{b.style.backgroundImage=ub.u;b.childNodes[3].style.backgroundColor=ub.u;b.childNodes[2].style.backgroundImage=ub.F+o.ZI+ub.G;if(o.ZA==this)o.ZA=null;}this._jsxBA=a;return this;};r.nH=function(){if(this._jsxVY!=null)for(var Ib in this._jsxVY)this._jsxVY[Ib].destroy();this._jsxVY={};var
sa=this.getId();var
ga=this.getXML();if(ga!=null)for(var
K=ga.selectNodeIterator(ub.Ba);K.hasNext();){var
Ab=K.next();var
B=(this.Sf(Ab,ub.Ca)).toLowerCase();var
ea=this.Sf(Ab,ub.B);var
ha=jsx3.makeCallback(function(sa,d){this.zs(d,sa);},this,ea);var
O=this.doKeyBinding(ha,B);if(O)this._jsxVY[ea]=O;}};r.zs=function(p,h){var
_a=this.getRecordNode(h);if(_a==null)return;var
V=_a.getParent();var
mb=V!=null&&V.getNodeName()==ub.Da?V.getAttribute(ub.H):null;var
sa=this.doEvent(ub.P,{objEVENT:p,objANCHOR:null,intINDEX:null,strPARENTID:mb});if(sa===false)return;if(this.isItemEnabled(h))this.e0(p,h);};o.yg={};o.yg[ub.X]=true;o.yg[ub.aa]=true;o.yg[ub.Ea]=true;o.yg[ub.V]=true;o.yg[ub.Fa]=ub.Ga;o.yg[ub.Ha]=ub.Ia;r.Hj=function(f,c,s){this.sk(f,c,s,3);};r.zd=function(){this.applyDynamicProperties();var
ab=this.getRelativePosition()!=0;var
gb={height:22};if(ab){var
Y=this.getMargin();gb.margin=Y!=null&&Y!=ub.u?Y:ub.Ja;gb.tagname=ub.Ka;gb.boxtype=ub.La;}else{var
ea=this.getLeft();var
V=this.getTop();gb.left=ea!=null&&ea!=ub.u?ea:0;gb.top=V!=null&&V!=ub.u?V:0;gb.tagname=ub.oa;gb.boxtype=ub.Ma;}if(this.getDivider()==1){gb.padding=ub.Na;gb.border=ub.Oa+o.F9;}var
Xa=new
jsx3.gui.Painted.Box(gb);gb={height:22,tagname:ub.Ka,boxtype:ub.La};gb.width=this.getImage()!=null&&this.getImage()!=ub.u?22:3;var
ia=new
jsx3.gui.Painted.Box(gb);Xa.cl(ia);gb={height:22,tagname:ub.Ka,boxtype:ub.La};if(jsx3.util.strEmpty(this.getText())){gb.width=1;}else gb.padding=ub.Pa;var
A=new
jsx3.gui.Painted.Box(gb);Xa.cl(A);var
Ta=new
jsx3.gui.Painted.Box({width:11,height:22,tagname:ub.Ka,boxtype:ub.La});Xa.cl(Ta);var
_=new
jsx3.gui.Painted.Box({width:1,height:22,tagname:ub.Ka,boxtype:ub.La});Xa.cl(_);return Xa;};r.paint=function(){this.applyDynamicProperties();if(this.getXmlAsync())var
O=this.getXML();this.nH();var
Jb=this;var
Pa=this.getState()==o.Ms?ub.a+o.SD+ub.Qa:ub.u;var
Db=this.ad();var
ha=this.lc();var
ea=null,W=null,ab=null;if(this.getEnabled()==1){ea=this.qj(o.yg,0);ab=ub.u;}else{ea=ub.u;ab=Ya.getCSSOpacity(0.4);}if(this.getImage()!=null)W=(this.getUriResolver()).resolveURI(this.getImage());var
J=this.renderAttributes(null,true);var
wa=this.Wl(true);wa.setAttributes(ub.Ra+this.getId()+ub.Sa+this.Rl()+this.nk()+this.Ak()+ea+ub.Ta+J);wa.setStyles(this.mi(true)+Pa+Db+ha+ab+this.Wi()+this.Bg());var
Lb=wa.lg(0);Lb.setStyles(W!=null?ub.a+W+ub.Qa:ub.u);Lb.setAttributes(ub.Ua+Ya._d);var
ga=wa.lg(1);ga.setAttributes(ub.Va+Ya._d);var
ta=this.getText();if(ta!=null&&ta!=ub.u){ga.setStyles(this.jc()+this._k()+this.cd()+this.wk());}else{ta=ub.Wa;ga.setStyles(Ya.co);}var
Xa=wa.lg(2);Xa.setStyles(ub.a+(this.getState()==o.Ms?o.Iv:o.ZI)+ub.Qa);Xa.setAttributes(ub.Xa);var
ja=wa.lg(3);ja.setStyles(ub.Ya+(this.getState()==o.Ms?ub.Za+o.F9+ub._a:ub.u));ja.setAttributes(ub.ab);return (wa.paint()).join((Lb.paint()).join(ub.Wa)+(ga.paint()).join(ta)+(Xa.paint()).join(ub.Wa)+(ja.paint()).join(ub.Wa));};r.onXmlBinding=function(n){this.jsxsupermix(n);this.nH();};r.ch=function(){return ub.Za+(this.getBackgroundColor()?this.getBackgroundColor():o.DEFAULTBACKGROUNDCOLOR)+ub._a;};r.ke=function(){return this.getBackground()?this.getBackground()+ub._a:o.DEFAULTBACKGROUND;};r.executeRecord=function(c){this.e0(this.isOldEventProtocol(),c);return this;};r.e0=function(e,b){var
sa=null;if((sa=this.getRecordNode(b))!=null){this._jsxvalue=b;var
B=this.Sf(sa,ub.bb);var
v=true;var
ca={strRECORDID:b,objRECORD:sa,_gipp:1};if(e instanceof jsx3.gui.Event)ca.objEVENT=e;v=jsx3.util.strEmpty(B)?true:this.eval(B,this._getEvtContext(ca));if(v!==false&&e)this.doEvent(ub.cb,ca);}};r.redrawRecord=function(){if(this==o.A1)this.ED();return this;};r.getValue=function(){return this._jsxvalue;};r.doValidate=function(){return (this.setValidationState(1)).getValidationState();};r.beep=function(){var
G=this.getRendered();jsx3.gui.no(G.childNodes[2],{backgroundImage:ub.F+o.Sz+ub.G});jsx3.gui.no(G,{backgroundImage:ub.F+o.CZ+ub.G});jsx3.gui.no(G.childNodes[3],{backgroundColor:ub.db});return this;};o.getVersion=function(){return ub.eb;};r.emGetSession=function(d){if(!d){return jsx3.gui.Matrix.EditMask.prototype.emGetSession.call(this);}else{var
ta=d.srcElement();while(ta&&ta.tagName.toLowerCase()!=ub.fb)ta=ta.parentNode;var
Ra=ta.parentNode.getAttribute(ub.H);var
U=this.getAncestorOfType(ub.gb);var
y=(U.sm())[ta.cellIndex];var
qb=y.getValueForRecord(Ra);return {matrix:U,column:y,recordId:Ra,td:ta,value:qb};}};r.emGetType=function(){return jsx3.gui.Matrix.EditMask.FORMAT;};r.emInit=function(m){this.jsxsupermix(m);this.subscribe(ub.cb,this,ub.hb);};r.emSetValue=function(p){};r.emGetValue=function(){return null;};r.emBeginEdit=function(q,f,i,c,h,a,d){var
Fa=d.childNodes[0].childNodes[0];if(Fa){this.jsxsupermix(q,f,i,c,h,a,d);Ya.focus(Fa);}else return false;};r.emPaintTemplate=function(){this.setEnabled(0);var
nb=this.paint();this.setEnabled(1);var
X=this.paint();return this.emGetTemplate(X,nb);};r.pt=function(p){var
ea=this.emGetSession();if(ea){Ya.focus(ea.td);this.ED(1,true);}};r.containsHtmlElement=function(d){var
sa=this.jsxsuper(d);if(!sa&&this==o.A1)for(var
nb=0;nb<o.L9.length&&!sa;nb++){var
R=o.L9[nb];if(R)sa=R.containsHtmlElement(d);}return sa;};r.getDivider=function(){return this.jsxdivider!=null?this.jsxdivider:0;};r.setDivider=function(e,j){this.jsxdivider=e;if(j)this.recalcBox([ub.ib,ub.jb]);else this.Qf();return this;};r.emCollapseEdit=function(s){this.ED(1,true);};});jsx3.gui.Menu.prototype.aG=jsx3.gui.ToolbarButton.prototype.Fo;jsx3.gui.Menu.prototype.ju=jsx3.gui.ToolbarButton.prototype.Ri;jsx3.gui.Menu.prototype.YA=jsx3.gui.ToolbarButton.prototype.Uc;jsx3.Menu=jsx3.gui.Menu;
